{% extends "admin_base.html" %}
{% block head %}
{{ super() }}
<script>
function replaceWidgetForm(widget_type){
   $.get("/admin/widget", { type: widget_type })
       .done(function(data){
       $("#widgetForm").replaceWith(data);
       })
     };
</script>
{% endblock %}

{% block content %}
<div class="container">
    <form action={{url_for('admin.create_widget')}} class="form-horizontal" method="post" role="form" id="widgetForm">
        <h2>Create Widget</h2>
        {{ form.hidden_tag() }}
        <div class="form-group">
            <div class="col-sm-10">
                <label for="type">Type:</label>
                <p>
                    {{ form.types(class='form-control', allow_blank=True, id="widgetTypes", onChange="javascript:replaceWidgetForm(this.options[this.selectedIndex].text);") }}
                </p>
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-10">
                <label for="name">Name:</label>
                {{ form.name(type="text", id="name", class="form-control", placeholder="Name", autofocus=true, required=true)}}
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-10">
                <button class="btn btn-lg btn-primary btn-block" type="submit">Create</button>
            </div>
        </div>
    </form>
</div>
{% endblock %}